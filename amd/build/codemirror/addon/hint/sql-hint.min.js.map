{"version":3,"sources":["../../../../src/codemirror/addon/hint/sql-hint.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","tables","defaultTable","keywords","identifierQuote","CONS","QUERY_DIV","ALIAS_KEYWORD","Pos","cmpPos","isArray","val","Object","prototype","toString","call","getKeywords","editor","mode","doc","modeOption","resolveMode","getIdentifierQuote","getText","item","text","wrapTable","name","value","columns","parseTables","input","result","i","length","toUpperCase","getTable","shallowClone","object","key","hasOwnProperty","match","string","word","len","sub","substr","addMatches","search","wordlist","formatter","push","displayText","cleanName","charAt","nameParts","split","replace","RegExp","join","insertIdentifierQuotes","escaped","nameCompletion","cur","token","useIdentifierQuotes","start","cont","unshift","getTokenAt","line","w","pop","table","alias","aliasTable","oldTable","findTableByAlias","tableInsert","eachWord","lineText","f","words","fullQuery","getValue","aliasUpperCase","previousWord","separator","validRange","end","lastLine","getLineHandle","indexOfSeparator","indexOf","posFromIndex","prevItem","current","getCursor","query","getRange","wordUpperCase","registerHelper","options","defaultTableName","disableKeywords","ch","slice","objectOrClass","className","list","from","to"],"mappings":"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","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../../mode/sql/sql\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../../mode/sql/sql\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var tables;\n  var defaultTable;\n  var keywords;\n  var identifierQuote;\n  var CONS = {\n    QUERY_DIV: \";\",\n    ALIAS_KEYWORD: \"AS\"\n  };\n  var Pos = CodeMirror.Pos, cmpPos = CodeMirror.cmpPos;\n\n  function isArray(val) { return Object.prototype.toString.call(val) == \"[object Array]\" }\n\n  function getKeywords(editor) {\n    var mode = editor.doc.modeOption;\n    if (mode === \"sql\") mode = \"text/x-sql\";\n    return CodeMirror.resolveMode(mode).keywords;\n  }\n\n  function getIdentifierQuote(editor) {\n    var mode = editor.doc.modeOption;\n    if (mode === \"sql\") mode = \"text/x-sql\";\n    return CodeMirror.resolveMode(mode).identifierQuote || \"`\";\n  }\n\n  function getText(item) {\n    return typeof item == \"string\" ? item : item.text;\n  }\n\n  function wrapTable(name, value) {\n    if (isArray(value)) value = {columns: value}\n    if (!value.text) value.text = name\n    return value\n  }\n\n  function parseTables(input) {\n    var result = {}\n    if (isArray(input)) {\n      for (var i = input.length - 1; i >= 0; i--) {\n        var item = input[i]\n        result[getText(item).toUpperCase()] = wrapTable(getText(item), item)\n      }\n    } else if (input) {\n      for (var name in input)\n        result[name.toUpperCase()] = wrapTable(name, input[name])\n    }\n    return result\n  }\n\n  function getTable(name) {\n    return tables[name.toUpperCase()]\n  }\n\n  function shallowClone(object) {\n    var result = {};\n    for (var key in object) if (object.hasOwnProperty(key))\n      result[key] = object[key];\n    return result;\n  }\n\n  function match(string, word) {\n    var len = string.length;\n    var sub = getText(word).substr(0, len);\n    return string.toUpperCase() === sub.toUpperCase();\n  }\n\n  function addMatches(result, search, wordlist, formatter) {\n    if (isArray(wordlist)) {\n      for (var i = 0; i < wordlist.length; i++)\n        if (match(search, wordlist[i])) result.push(formatter(wordlist[i]))\n    } else {\n      for (var word in wordlist) if (wordlist.hasOwnProperty(word)) {\n        var val = wordlist[word]\n        if (!val || val === true)\n          val = word\n        else\n          val = val.displayText ? {text: val.text, displayText: val.displayText} : val.text\n        if (match(search, val)) result.push(formatter(val))\n      }\n    }\n  }\n\n  function cleanName(name) {\n    // Get rid name from identifierQuote and preceding dot(.)\n    if (name.charAt(0) == \".\") {\n      name = name.substr(1);\n    }\n    // replace duplicated identifierQuotes with single identifierQuotes\n    // and remove single identifierQuotes\n    var nameParts = name.split(identifierQuote+identifierQuote);\n    for (var i = 0; i < nameParts.length; i++)\n      nameParts[i] = nameParts[i].replace(new RegExp(identifierQuote,\"g\"), \"\");\n    return nameParts.join(identifierQuote);\n  }\n\n  function insertIdentifierQuotes(name) {\n    var nameParts = getText(name).split(\".\");\n    for (var i = 0; i < nameParts.length; i++)\n      nameParts[i] = identifierQuote +\n        // duplicate identifierQuotes\n        nameParts[i].replace(new RegExp(identifierQuote,\"g\"), identifierQuote+identifierQuote) +\n        identifierQuote;\n    var escaped = nameParts.join(\".\");\n    if (typeof name == \"string\") return escaped;\n    name = shallowClone(name);\n    name.text = escaped;\n    return name;\n  }\n\n  function nameCompletion(cur, token, result, editor) {\n    // Try to complete table, column names and return start position of completion\n    var useIdentifierQuotes = false;\n    var nameParts = [];\n    var start = token.start;\n    var cont = true;\n    while (cont) {\n      cont = (token.string.charAt(0) == \".\");\n      useIdentifierQuotes = useIdentifierQuotes || (token.string.charAt(0) == identifierQuote);\n\n      start = token.start;\n      nameParts.unshift(cleanName(token.string));\n\n      token = editor.getTokenAt(Pos(cur.line, token.start));\n      if (token.string == \".\") {\n        cont = true;\n        token = editor.getTokenAt(Pos(cur.line, token.start));\n      }\n    }\n\n    // Try to complete table names\n    var string = nameParts.join(\".\");\n    addMatches(result, string, tables, function(w) {\n      return useIdentifierQuotes ? insertIdentifierQuotes(w) : w;\n    });\n\n    // Try to complete columns from defaultTable\n    addMatches(result, string, defaultTable, function(w) {\n      return useIdentifierQuotes ? insertIdentifierQuotes(w) : w;\n    });\n\n    // Try to complete columns\n    string = nameParts.pop();\n    var table = nameParts.join(\".\");\n\n    var alias = false;\n    var aliasTable = table;\n    // Check if table is available. If not, find table by Alias\n    if (!getTable(table)) {\n      var oldTable = table;\n      table = findTableByAlias(table, editor);\n      if (table !== oldTable) alias = true;\n    }\n\n    var columns = getTable(table);\n    if (columns && columns.columns)\n      columns = columns.columns;\n\n    if (columns) {\n      addMatches(result, string, columns, function(w) {\n        var tableInsert = table;\n        if (alias == true) tableInsert = aliasTable;\n        if (typeof w == \"string\") {\n          w = tableInsert + \".\" + w;\n        } else {\n          w = shallowClone(w);\n          w.text = tableInsert + \".\" + w.text;\n        }\n        return useIdentifierQuotes ? insertIdentifierQuotes(w) : w;\n      });\n    }\n\n    return start;\n  }\n\n  function eachWord(lineText, f) {\n    var words = lineText.split(/\\s+/)\n    for (var i = 0; i < words.length; i++)\n      if (words[i]) f(words[i].replace(/[`,;]/g, ''))\n  }\n\n  function findTableByAlias(alias, editor) {\n    var doc = editor.doc;\n    var fullQuery = doc.getValue();\n    var aliasUpperCase = alias.toUpperCase();\n    var previousWord = \"\";\n    var table = \"\";\n    var separator = [];\n    var validRange = {\n      start: Pos(0, 0),\n      end: Pos(editor.lastLine(), editor.getLineHandle(editor.lastLine()).length)\n    };\n\n    //add separator\n    var indexOfSeparator = fullQuery.indexOf(CONS.QUERY_DIV);\n    while(indexOfSeparator != -1) {\n      separator.push(doc.posFromIndex(indexOfSeparator));\n      indexOfSeparator = fullQuery.indexOf(CONS.QUERY_DIV, indexOfSeparator+1);\n    }\n    separator.unshift(Pos(0, 0));\n    separator.push(Pos(editor.lastLine(), editor.getLineHandle(editor.lastLine()).text.length));\n\n    //find valid range\n    var prevItem = null;\n    var current = editor.getCursor()\n    for (var i = 0; i < separator.length; i++) {\n      if ((prevItem == null || cmpPos(current, prevItem) > 0) && cmpPos(current, separator[i]) <= 0) {\n        validRange = {start: prevItem, end: separator[i]};\n        break;\n      }\n      prevItem = separator[i];\n    }\n\n    if (validRange.start) {\n      var query = doc.getRange(validRange.start, validRange.end, false);\n\n      for (var i = 0; i < query.length; i++) {\n        var lineText = query[i];\n        eachWord(lineText, function(word) {\n          var wordUpperCase = word.toUpperCase();\n          if (wordUpperCase === aliasUpperCase && getTable(previousWord))\n            table = previousWord;\n          if (wordUpperCase !== CONS.ALIAS_KEYWORD)\n            previousWord = word;\n        });\n        if (table) break;\n      }\n    }\n    return table;\n  }\n\n  CodeMirror.registerHelper(\"hint\", \"sql\", function(editor, options) {\n    tables = parseTables(options && options.tables)\n    var defaultTableName = options && options.defaultTable;\n    var disableKeywords = options && options.disableKeywords;\n    defaultTable = defaultTableName && getTable(defaultTableName);\n    keywords = getKeywords(editor);\n    identifierQuote = getIdentifierQuote(editor);\n\n    if (defaultTableName && !defaultTable)\n      defaultTable = findTableByAlias(defaultTableName, editor);\n\n    defaultTable = defaultTable || [];\n\n    if (defaultTable.columns)\n      defaultTable = defaultTable.columns;\n\n    var cur = editor.getCursor();\n    var result = [];\n    var token = editor.getTokenAt(cur), start, end, search;\n    if (token.end > cur.ch) {\n      token.end = cur.ch;\n      token.string = token.string.slice(0, cur.ch - token.start);\n    }\n\n    if (token.string.match(/^[.`\"'\\w@][\\w$#]*$/g)) {\n      search = token.string;\n      start = token.start;\n      end = token.end;\n    } else {\n      start = end = cur.ch;\n      search = \"\";\n    }\n    if (search.charAt(0) == \".\" || search.charAt(0) == identifierQuote) {\n      start = nameCompletion(cur, token, result, editor);\n    } else {\n      var objectOrClass = function(w, className) {\n        if (typeof w === \"object\") {\n          w.className = className;\n        } else {\n          w = { text: w, className: className };\n        }\n        return w;\n      };\n    addMatches(result, search, defaultTable, function(w) {\n        return objectOrClass(w, \"CodeMirror-hint-table CodeMirror-hint-default-table\");\n    });\n    addMatches(\n        result,\n        search,\n        tables, function(w) {\n          return objectOrClass(w, \"CodeMirror-hint-table\");\n        }\n    );\n    if (!disableKeywords)\n      addMatches(result, search, keywords, function(w) {\n          return objectOrClass(w.toUpperCase(), \"CodeMirror-hint-keyword\");\n      });\n  }\n\n    return {list: result, from: Pos(cur.line, start), to: Pos(cur.line, end)};\n  });\n});\n"],"file":"sql-hint.min.js"}